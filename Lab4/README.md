# Архитектура сети. Проектирование сети
## Цель
В данной самостоятельной работе необходимо распланировать адресное пространство Настроить IP на всех активных портах для дальнейшей работы над проектом Адресное пространство должно быть задокументировано.

 Описание/Пошаговая инструкция выполнения домашнего задания: 

В этой самостоятельной работе мы ожидаем, что вы самостоятельно:

  1)	Разработаете и задокументируете адресное пространство для лабораторного стенда. 
  2)	Настроите ip адреса на каждом активном порту 
  3)	Настроите каждый VPC в каждом офисе в своем VLAN.
  4)	Настроите VLAN/Loopbackup interface управления для сетевых устройств 
  5)	Настроите сети офисов так, чтобы не возникало broadcast штормов, а использование линков было максимально оптимизировано 
  6)	Используете IPv4. IPv6 по желанию

## Топология сети
![alt text](image.png)
## Сети Москвы (AS 1001)

### Таблица подсетей

| Подсеть         | Маска           | Назначение                                | Пояснение                                                                 |
|------------------|-----------------|-------------------------------------------|---------------------------------------------------------------------------|
| `10.1.1.0/24`   | `255.255.255.0` | VLAN 10 — Управление                     | Управление коммутаторами и маршрутизаторами.                             |
| `10.1.2.0/24`   | `255.255.255.0` | VLAN 20 — Конечные устройства            | Объединяет VPC (конечные устройства) с VRRP-шлюзом.                      |
| `10.1.3.0/30`   | `255.255.255.252` | Соединение между R12 и R14              | Точечное соединение между маршрутизаторами.                              |
| `10.1.3.4/30`   | `255.255.255.252` | Соединение между R12 и R15              | Аналогично другим соединениям.                                           |
| `10.1.3.8/30`   | `255.255.255.252` | Соединение между R13 и R14              | Подсеть для прямого соединения R13 ↔ R14.                                |
| `10.1.3.12/30`  | `255.255.255.252` | Соединение между R13 и R15              | Аналогично другим межмаршрутизаторным соединениям.                       |
| `10.1.3.16/30`  | `255.255.255.252` | Соединение между R14 и R19              | Подсеть между маршрутизаторами для связи внутри AS 1001.                 |
| `10.1.3.20/30`  | `255.255.255.252` | Соединение между R15 и R20              | Аналогично для соединения R15 ↔ R20.                                     |
| `10.1.255.0/24` | `255.255.255.0` | Loopback-интерфейсы маршрутизаторов      | Стабильные IP для OSPF Router ID и BGP update-source.                    |
| `198.18.0.0/30` | `255.255.255.252` | Соединение между R14 и AS 101 (R22)     | Зарезервированный диапазон для тестирования.                             |
| `198.18.0.4/30` | `255.255.255.252` | Соединение между R15 и AS 301 (R21)     | Аналогично для связи с AS 301.                                           |

### Пояснения
1. **VLAN 10:** Управление сетевыми устройствами для упрощения администрирования.
2. **VLAN 20:** Сеть конечных устройств с отказоустойчивым VRRP-шлюзом.
3. **Подсети `/30`:** Минимизируют расход адресного пространства.
4. **Loopback:** Стабильные адреса для маршрутизации и управления.
5. **Меж-AS соединения:** Используют тестовые диапазоны для эмуляции взаимодействия автономных систем.

## IP адресация Москвы (AS 1001) 

- Управление через VLAN 10 (управляемые устройства и VRRP).
- Конечные устройства в VLAN 20 с отказоустойчивым шлюзом (VRRP).
- Точечные соединения между маршрутизаторами.
- Loopback-интерфейсы для маршрутизации и управления.
- Соединения с соседними автономными системами (AS 101 и AS 301) через NAT.

| **Устройство** | **Интерфейс** | **IP-адрес**   | **Маска**       | **Назначение**                                |
|----------------|---------------|----------------|-----------------|----------------------------------------------|
| **R12**        | e0/0.10       | 10.1.1.1       | 255.255.255.0   | VLAN 10 — Управление (VRRP Master)           |
|                | e0/0.20       | 10.1.2.1       | 255.255.255.0   | VLAN 20 — Конечные устройства (VRRP Master)  |
|                | e0/2          | 10.1.3.1       | 255.255.255.252 | Соединение с R14                             |
|                | e0/3          | 10.1.3.5       | 255.255.255.252 | Соединение с R15                             |
|                | Loopback0     | 10.1.255.1     | 255.255.255.255 | Loopback для управления и маршрутизации      |
| **R13**        | e0/0.10       | 10.1.1.2       | 255.255.255.0   | VLAN 10 — Управление (VRRP Backup)           |
|                | e0/0.20       | 10.1.2.2       | 255.255.255.0   | VLAN 20 — Конечные устройства (VRRP Backup)  |
|                | e0/2          | 10.1.3.9       | 255.255.255.252 | Соединение с R14                             |
|                | e0/3          | 10.1.3.13      | 255.255.255.252 | Соединение с R15                             |
|                | Loopback0     | 10.1.255.2     | 255.255.255.255 | Loopback для управления и маршрутизации      |
| **R14**        | e0/0          | 10.1.3.2       | 255.255.255.252 | Соединение с R12                             |
|                | e0/1          | 10.1.3.10      | 255.255.255.252 | Соединение с R13                             |
|                | e0/2          | 198.18.0.1     | 255.255.255.252 | Соединение с AS 101 (R22)                    |
|                | e0/3          | 10.1.3.17      | 255.255.255.252 | Соединение с R19                             |
|                | Loopback0     | 10.1.255.3     | 255.255.255.255 | Loopback для управления и маршрутизации      |
| **R15**        | e0/0          | 10.1.3.14      | 255.255.255.252 | Соединение с R13                             |
|                | e0/1          | 10.1.3.6       | 255.255.255.252 | Соединение с R12                             |
|                | e0/2          | 198.18.0.5     | 255.255.255.252 | Соединение с AS 301 (R21)                    |
|                | e0/3          | 10.1.3.21      | 255.255.255.252 | Соединение с R20                             |
|                | Loopback0     | 10.1.255.4     | 255.255.255.255 | Loopback для управления и маршрутизации      |
| **R19**        | e0/0          | 10.1.3.18      | 255.255.255.252 | Соединение с R14                             |
|                | Loopback0     | 10.1.255.5     | 255.255.255.255 | Loopback для управления и маршрутизации      |
| **R20**        | e0/0          | 10.1.3.22      | 255.255.255.252 | Соединение с R15                             |
|                | Loopback0     | 10.1.255.6     | 255.255.255.255 | Loopback для управления и маршрутизации      |
| **SW2**        | VLAN 10       | 10.1.1.3       | 255.255.255.0   | Управляемый IP для SW2                       |
| **SW3**        | VLAN 10       | 10.1.1.4       | 255.255.255.0   | Управляемый IP для SW3                       |
| **SW4**        | VLAN 10       | 10.1.1.5       | 255.255.255.0   | Управляемый IP для SW4                       |
| **SW5**        | VLAN 10       | 10.1.1.6       | 255.255.255.0   | Управляемый IP для SW5                       |
| **VPC1**       | eth0          | 10.1.2.100     | 255.255.255.0   | Конечное устройство в VLAN 20                |
| **VPC7**       | eth0          | 10.1.2.101     | 255.255.255.0   | Конечное устройство в VLAN 20                |

---

## Пояснения

### 1. VLAN 10 (10.1.1.0/24)
- Используется для управления коммутаторами и маршрутизаторами.
- **VRRP:**
  - **Master:** R12 (`10.1.1.1`).
  - **Backup:** R13 (`10.1.1.2`).
  - **Виртуальный шлюз (VRRP):** `10.1.1.254`.

### 2. VLAN 20 (10.1.2.0/24)
- Подсеть для конечных устройств (VPC1, VPC7).
- **VRRP:**
  - **Master:** R12 (`10.1.2.1`).
  - **Backup:** R13 (`10.1.2.2`).
  - **Виртуальный шлюз (VRRP):** `10.1.2.254`.

### 3. Точечные соединения (10.1.3.0/30 - 10.1.3.20/30)
- Соединяют маршрутизаторы внутри AS 1001.
- Маска `/30` минимизирует расход IP-адресов.

### 4. Loopback-интерфейсы (10.1.255.0/24)
- Выделены для стабильных IP-адресов маршрутизаторов, используемых в OSPF и BGP.

### 5. Меж-AS соединения (198.18.0.0/30 и 198.18.0.4/30)
- Используются для подключения к AS 101 и AS 301.
- Зарезервированный диапазон (RFC 2544) для тестирования и эмуляций.


